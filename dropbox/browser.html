<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>kitchen_sink options</title>
		<link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.3.0/bootstrap.min.css" />
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
		<script>
			$(document).ready(function() {
				$.getJSON('http://dl.dropbox.com/u/<userid>/bookmarks.json', function(jsonp) {
					for (var i=0; i < jsonp[0].children.length; i++) {
						//main bookmark folder
						$("#bookmarks").append($("<div class=\"row\">").attr("id", jsonp[0].children[i].id));
						container = $("#bookmarks div#" + jsonp[0].children[i].id);
						//title
						container.append($("<div class=\"span12\">").append($("<h3>").text(jsonp[0].children[i].title)));
						//bookmarks & folders
						display_tree(container.children(".span12"), jsonp[0].children[i].children);
					};
				});
			 });
			
			function display_tree(container, tree) {
				container.append($("<ul>"));
				ul = container.children("ul");
				for (var i=0; i < tree.length; i++) {
					//check if it's a folder
					if(tree[i].children == undefined) {
						//simple entry
						ul.append($("<li>").text(tree[i].title + " - ").append($("<a target=\"_blank\">").text(tree[i].url).attr("href", tree[i].url)));
					} else {
						//folder
						ul.append($("<li>").html("<strong>" + tree[i].title + "</strong>"));
						display_tree(ul, tree[i].children);
					}
				};
			}
		</script>
	</head>
	<body>
		<div class="container">
			<div class="content">
				<div class="page-header">
					<h1>kitchen_sink <small>bookmarks</small></h1>
				</div>
				<div id="bookmarks"></div>
			</div>
		</div>
	</body>
</html>